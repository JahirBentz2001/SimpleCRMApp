{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../api/services\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nconst _c0 = function (a1) {\n  return [\"/update-customer\", a1];\n};\nfunction HomeComponent_ng_container_4_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"a\", 7);\n    i0.ɵɵtext(9, \" Edit \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function HomeComponent_ng_container_4_tr_13_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const customer_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.askForDelete(customer_r4.id));\n    });\n    i0.ɵɵtext(11, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const customer_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r4.firstName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r4.lastName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r4.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, customer_r4.id));\n  }\n}\nfunction HomeComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"table\", 5)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"First Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Last Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Options\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"tbody\");\n    i0.ɵɵtemplate(13, HomeComponent_ng_container_4_tr_13_Template, 12, 6, \"tr\", 6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.customers);\n  }\n}\nfunction HomeComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 9);\n    i0.ɵɵtext(1, \"There are no customers\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class HomeComponent {\n  constructor(_customerService) {\n    this._customerService = _customerService;\n    this.handleError = error => {\n      if (error.status != 404) {\n        Swal.fire({\n          icon: 'error',\n          title: 'Something went wrong!',\n          text: `Something unexpected happened. Status code: ${error.status}`\n        });\n      }\n    };\n  }\n  ngOnInit() {\n    this.getList();\n  }\n  getList() {\n    this.customerService.listCustomer().subscribe({\n      next: customers => this.customers = customers ?? [],\n      error: this.handleError\n    });\n  }\n  askForDelete(id) {\n    if (id === null || id === undefined) {\n      alert(\"Invalid ID\");\n      return;\n    }\n    ;\n    // Ask for confirmation\n    Swal.fire({\n      title: 'Are you sure?',\n      text: 'This action cannot be undone',\n      icon: 'warning',\n      showCancelButton: true,\n      cancelButtonColor: '#d33',\n      confirmButtonColor: '#3085d6'\n    }).then(result => {\n      if (result.isConfirmed) {\n        this.deleteCustomer(id);\n      }\n    });\n  }\n  deleteCustomer(customerId) {\n    this.customerService.deleteCustomer({\n      id: customerId\n    }).subscribe({\n      next: () => {\n        this.getList();\n      },\n      error: this.handleError\n    });\n  }\n}\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.CustomerService));\n};\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  decls: 7,\n  vars: 2,\n  consts: [[1, \"columns\", \"is-centered\", \"is-vcentered\"], [1, \"column\", \"is-half\"], [1, \"title\"], [4, \"ngIf\", \"ngIfElse\"], [\"emptyList\", \"\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [1, \"button\", \"is-small\", \"is-info\", \"mr-2\", 3, \"routerLink\"], [1, \"button\", \"is-small\", \"is-danger\", 3, \"click\"], [1, \"has-text-danger\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n      i0.ɵɵtext(3, \"Customers List\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, HomeComponent_ng_container_4_Template, 14, 1, \"ng-container\", 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(5, HomeComponent_ng_template_5_Template, 2, 0, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(6);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.customers.length > 0)(\"ngIfElse\", _r1);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.RouterLink],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"AAKA,OAAOA,IAAI,MAAM,aAAa;;;;;;;;;;;ICSpBC,0BAAuC;IACjCA,YAAwB;IAAAA,iBAAK;IACjCA,0BAAI;IAAAA,YAAuB;IAAAA,iBAAK;IAChCA,0BAAI;IAAAA,YAAoB;IAAAA,iBAAK;IAC7BA,0BAAI;IAGAA,sBACF;IAAAA,iBAAI;IACJA,kCAA8E;IAApCA;MAAA;MAAA;MAAA;MAAA,OAASA,kDAAyB;IAAA,EAAC;IAACA,uBAAM;IAAAA,iBAAS;;;;IAR3FA,eAAwB;IAAxBA,2CAAwB;IACxBA,eAAuB;IAAvBA,0CAAuB;IACvBA,eAAoB;IAApBA,uCAAoB;IAEkBA,eAAgD;IAAhDA,uEAAgD;;;;;IAhBlGA,6BAA2D;IACzDA,gCAAqB;IAGXA,0BAAU;IAAAA,iBAAK;IACnBA,0BAAI;IAAAA,yBAAS;IAAAA,iBAAK;IAClBA,0BAAI;IAAAA,qBAAK;IAAAA,iBAAK;IACdA,2BAAI;IAAAA,wBAAO;IAAAA,iBAAK;IAGpBA,8BAAO;IACLA,8EAYK;IACPA,iBAAQ;IAEZA,0BAAe;;;;IAfgBA,gBAAY;IAAZA,0CAAY;;;;;IAoB7CA,4BAA2B;IAAAA,sCAAsB;IAAAA,iBAAI;;;ADvBvD,OAAM,MAAOC,aAAa;EAIxBC,YACUC,gBAAiC;IAAjC,qBAAgB,GAAhBA,gBAAgB;IA8ClB,gBAAW,GAAIC,KAAU,IAAI;MACnC,IAAGA,KAAK,CAACC,MAAM,IAAI,GAAG,EAAC;QACrBN,IAAI,CAACO,IAAI,CAAC;UACRC,IAAI,EAAE,OAAO;UACbC,KAAK,EAAE,uBAAuB;UAC9BC,IAAI,EAAE,+CAA+CL,KAAK,CAACC,MAAM;SAClE,CAAC;;IAEN,CAAC;EAtD8C;EAE/CK,QAAQ;IACN,IAAI,CAACC,OAAO,EAAE;EAChB;EAEOA,OAAO;IACZ,IAAI,CAACC,eAAe,CAACC,YAAY,EAAE,CAChCC,SAAS,CAAC;MACTC,IAAI,EAAGC,SAAS,IAAK,IAAI,CAACA,SAAS,GAAGA,SAAS,IAAI,EAAE;MACrDZ,KAAK,EAAE,IAAI,CAACa;KACb,CAAC;EACN;EAEOC,YAAY,CAACC,EAAW;IAC7B,IAAGA,EAAE,KAAK,IAAI,IAAIA,EAAE,KAAKC,SAAS,EAAC;MACjCC,KAAK,CAAC,YAAY,CAAC;MACnB;;IACD;IAED;IACAtB,IAAI,CAACO,IAAI,CAAC;MACRE,KAAK,EAAE,eAAe;MACtBC,IAAI,EAAE,8BAA8B;MACpCF,IAAI,EAAE,SAAS;MACfe,gBAAgB,EAAE,IAAI;MACtBC,iBAAiB,EAAE,MAAM;MACzBC,kBAAkB,EAAE;KACrB,CAAC,CACDC,IAAI,CAAEC,MAAM,IAAI;MACf,IAAGA,MAAM,CAACC,WAAW,EAAC;QACpB,IAAI,CAACC,cAAc,CAACT,EAAE,CAAC;;IAE3B,CAAC,CAAC;EACJ;EAEQS,cAAc,CAACC,UAAkB;IACvC,IAAI,CAACjB,eAAe,CAACgB,cAAc,CAAC;MAAET,EAAE,EAAEU;IAAU,CAAE,CAAC,CACpDf,SAAS,CAAC;MACTC,IAAI,EAAE,MAAK;QACT,IAAI,CAACJ,OAAO,EAAE;MAChB,CAAC;MACDP,KAAK,EAAE,IAAI,CAACa;KACb,CAAC;EACN;;AAjDWhB,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;QAAbA,aAAa;EAAA6B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCX1BlC,8BAA8C;MAExBA,8BAAc;MAAAA,iBAAK;MACrCA,iFA0Be;MACjBA,iBAAM;MAGRA,+GAEc;;;;MAhCKA,eAA4B;MAA5BA,+CAA4B","names":["Swal","i0","HomeComponent","constructor","_customerService","error","status","fire","icon","title","text","ngOnInit","getList","customerService","listCustomer","subscribe","next","customers","handleError","askForDelete","id","undefined","alert","showCancelButton","cancelButtonColor","confirmButtonColor","then","result","isConfirmed","deleteCustomer","customerId","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/jahir_benitez/Development/CRMApp/ClientApp/src/app/home/home.component.ts","/home/jahir_benitez/Development/CRMApp/ClientApp/src/app/home/home.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { CustomerRm } from '../api/models';\r\nimport { CustomerService } from '../api/services';\r\n\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n})\r\nexport class HomeComponent implements OnInit {\r\n\r\n  customers: CustomerRm[];\r\n\r\n  constructor(\r\n    private _customerService: CustomerService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getList();\r\n  }\r\n\r\n  public getList(){\r\n    this.customerService.listCustomer()\r\n      .subscribe({\r\n        next: (customers) => this.customers = customers ?? [],\r\n        error: this.handleError\r\n      });\r\n  }\r\n\r\n  public askForDelete(id?: string){\r\n    if(id === null || id === undefined){\r\n      alert(\"Invalid ID\");\r\n      return;\r\n    };\r\n\r\n    // Ask for confirmation\r\n    Swal.fire({\r\n      title: 'Are you sure?',\r\n      text: 'This action cannot be undone',\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonColor: '#3085d6',\r\n    })\r\n    .then((result) => {\r\n      if(result.isConfirmed){\r\n        this.deleteCustomer(id);\r\n      }\r\n    });\r\n  }\r\n\r\n  private deleteCustomer(customerId: string){\r\n    this.customerService.deleteCustomer({ id: customerId })\r\n      .subscribe({\r\n        next: () => {\r\n          this.getList();  \r\n        },\r\n        error: this.handleError\r\n      })\r\n  }\r\n\r\n  private handleError = (error: any) => {\r\n    if(error.status != 404){\r\n      Swal.fire({\r\n        icon: 'error',\r\n        title: 'Something went wrong!',\r\n        text: `Something unexpected happened. Status code: ${error.status}`\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"columns is-centered is-vcentered\">\r\n  <div class=\"column is-half\"> \r\n    <h1 class=\"title\">Customers List</h1>\r\n    <ng-container *ngIf=\"customers.length > 0; else emptyList\">\r\n      <table class=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>First Name</th>\r\n            <th>Last Name</th>\r\n            <th>Email</th>\r\n            <th>Options</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor=\"let customer of customers\">\r\n            <td>{{ customer.firstName }}</td>\r\n            <td>{{ customer.lastName }}</td>\r\n            <td>{{ customer.email }}</td>\r\n            <td>\r\n              <a class=\"button is-small is-info mr-2\" [routerLink]=\"['/update-customer', customer.id]\">\r\n                <!--<i class=\"fas fas-pencil\"></i>-->\r\n                Edit\r\n              </a>\r\n              <button class=\"button is-small is-danger\" (click)=\"askForDelete(customer.id)\">Delete</button>\r\n\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #emptyList>\r\n  <p class=\"has-text-danger\">There are no customers</p>\r\n</ng-template>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}